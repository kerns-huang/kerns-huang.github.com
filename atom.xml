<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>kerns的小窝</title>
  
  <subtitle>行走在路上，无愧于心。</subtitle>
  <link href="http://yoursite.com/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2025-11-20T06:43:30.603Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>kerns</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>爬虫技术整理</title>
    <link href="http://yoursite.com/2025/11/20/%E7%88%AC%E8%99%AB%E6%8A%80%E6%9C%AF%E6%95%B4%E7%90%86/"/>
    <id>http://yoursite.com/2025/11/20/%E7%88%AC%E8%99%AB%E6%8A%80%E6%9C%AF%E6%95%B4%E7%90%86/</id>
    <published>2025-11-20T01:55:24.000Z</published>
    <updated>2025-11-20T06:43:30.603Z</updated>
    
    <content type="html"><![CDATA[<blockquote class="pullquote mindmap mindmap-md"><ul><li>爬虫技术<ul><li>代理ip<ul><li><a href="https://h.shanchendaili.com/">闪臣</a></li></ul></li><li>http请求<ul><li>指纹<ul><li>curl_cffi</li><li>tls-client</li></ul></li><li>默认的<ul><li>requests</li></ul></li></ul></li><li>无头浏览器<ul><li>Selenium</li><li>Playwright</li><li>Puppeteer  </li><li>Cheerio</li></ul></li><li>验证码<ul><li><a href="https://www.jfbym.com/">云码</a></li></ul></li></ul></li></ul></blockquote><h1 id="详解"><a href="#详解" class="headerlink" title="详解"></a>详解</h1><h2 id="指纹http套件"><a href="#指纹http套件" class="headerlink" title="指纹http套件"></a>指纹http套件</h2><h3 id="curl-cffi"><a href="#curl-cffi" class="headerlink" title="curl_cffi"></a>curl_cffi</h3><p>优点：对各个系统的支持都比较OK。<br>缺点：只支持低版本的指纹，对于热门，最新版本的指纹不积极。</p><h3 id="tls-client"><a href="#tls-client" class="headerlink" title="tls-client"></a>tls-client</h3><p>优点：支持最新版本的指纹相关的操作</p><p>缺点：在window环境下对代理的设置不友好,常用的代理方式基本无效，只能通过环境变量的方式去设置。</p><h2 id="无头浏览器"><a href="#无头浏览器" class="headerlink" title="无头浏览器"></a>无头浏览器</h2><p>Playwright</p><p>Selenium</p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote class=&quot;pullquote mindmap mindmap-md&quot;&gt;&lt;ul&gt;
&lt;li&gt;爬虫技术&lt;ul&gt;
&lt;li&gt;代理ip&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://h.shanchendaili.com/&quot;&gt;闪臣&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Fine-tuning技术整理</title>
    <link href="http://yoursite.com/2025/05/20/Fine-tuning%E6%8A%80%E6%9C%AF%E6%95%B4%E7%90%86/"/>
    <id>http://yoursite.com/2025/05/20/Fine-tuning%E6%8A%80%E6%9C%AF%E6%95%B4%E7%90%86/</id>
    <published>2025-05-20T13:47:00.000Z</published>
    <updated>2025-05-28T13:50:20.974Z</updated>
    
    <content type="html"><![CDATA[<h1 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h1><p>当大模型能力不够的，需要通过Fine-tuning微调。</p><h1 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h1><p>成本很高，需要机器</p><h1 id="实现方式"><a href="#实现方式" class="headerlink" title="实现方式"></a>实现方式</h1><h2 id="P-Tuning"><a href="#P-Tuning" class="headerlink" title="P-Tuning"></a>P-Tuning</h2><p> <a href="https://arxiv.org/pdf/2110.07602">参考资料</a><br> <a href="https://github.com/THUDM/ChatGLM2-6B/blob/main/ptuning">P-Tuning方式</a></p><h2 id="Lora微调"><a href="#Lora微调" class="headerlink" title="Lora微调"></a>Lora微调</h2><p>在原始预训练模型旁边增加一个旁路</p><h1 id="数据获取的方式"><a href="#数据获取的方式" class="headerlink" title="数据获取的方式"></a>数据获取的方式</h1><ol><li>实际场景获取</li><li>老师模型获取</li></ol><h1 id="工具箱"><a href="#工具箱" class="headerlink" title="工具箱"></a>工具箱</h1><p><a href="https://github.com/huggingface/peft">PEFT</a>支持上面的几种微调方式。</p><p><a href="https://github.com/unslothai/unsloth">unsloth</a></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://github.com/THUDM/ChatGLM2-6B">ChatGLM2-6B</a></p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;原因&quot;&gt;&lt;a href=&quot;#原因&quot; class=&quot;headerlink&quot; title=&quot;原因&quot;&gt;&lt;/a&gt;原因&lt;/h1&gt;&lt;p&gt;当大模型能力不够的，需要通过Fine-tuning微调。&lt;/p&gt;
&lt;h1 id=&quot;缺点&quot;&gt;&lt;a href=&quot;#缺点&quot; class=&quot;head</summary>
      
    
    
    
    <category term="ai" scheme="http://yoursite.com/categories/ai/"/>
    
    
    <category term="ai" scheme="http://yoursite.com/tags/ai/"/>
    
  </entry>
  
  <entry>
    <title>cursor配置管理</title>
    <link href="http://yoursite.com/2025/04/21/cursor%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86/"/>
    <id>http://yoursite.com/2025/04/21/cursor%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86/</id>
    <published>2025-04-21T01:00:00.000Z</published>
    <updated>2025-04-21T01:04:37.367Z</updated>
    
    <content type="html"><![CDATA[<h1 id="基本信息"><a href="#基本信息" class="headerlink" title="基本信息"></a>基本信息</h1><p>ai 辅助编程这块目前做的比较好的软件，国内类似的软件有抖音提供的trae，但是相对而言没有cursor做的成熟，至少国内版本用下来是这样，虽然cursor是收费的，但是效率和自动代码生成这块还是差距比较大的</p><h3 id="通用规则设置"><a href="#通用规则设置" class="headerlink" title="通用规则设置"></a>通用规则设置</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">0. Always respond in 中文</span><br><span class="line">1. 之前完成正确的功能，尽量不要修改。</span><br><span class="line">比如当前的instruction是完善功能A的，那么只需要专注功能A，不需要修改其他功能（比如功能B）。</span><br><span class="line">2. 生成的注释用中文，并使用UTF-8编码。</span><br><span class="line">3. 生成的代码有时候会存在中文乱码的情况，所以你在生成中文的时候，需要检查是否有中文乱码，如果有乱码需要修正。</span><br><span class="line">4. 如果修改某个函数的实现，先理解之前函数实现的逻辑，然后在原来的基础上，再进行修改（保留之前的函数逻辑，不要移除）。</span><br><span class="line">5. 专注当前的需求，不要改动没有提及的已经完成的功能，避免造成功能缺失或引入新的问题。</span><br><span class="line">6.日志相关的输出尽量使用英文。</span><br></pre></td></tr></table></figure><p><img src="/images/pasted-28.png" alt="upload successful"></p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;基本信息&quot;&gt;&lt;a href=&quot;#基本信息&quot; class=&quot;headerlink&quot; title=&quot;基本信息&quot;&gt;&lt;/a&gt;基本信息&lt;/h1&gt;&lt;p&gt;ai 辅助编程这块目前做的比较好的软件，国内类似的软件有抖音提供的trae，但是相对而言没有cursor做的成熟，至少国内版</summary>
      
    
    
    
    <category term="ai" scheme="http://yoursite.com/categories/ai/"/>
    
    
    <category term="ai" scheme="http://yoursite.com/tags/ai/"/>
    
  </entry>
  
  <entry>
    <title>RAG技术整理</title>
    <link href="http://yoursite.com/2025/04/19/RAG%E6%8A%80%E6%9C%AF%E6%95%B4%E7%90%86/"/>
    <id>http://yoursite.com/2025/04/19/RAG%E6%8A%80%E6%9C%AF%E6%95%B4%E7%90%86/</id>
    <published>2025-04-19T01:58:00.000Z</published>
    <updated>2025-04-19T11:28:04.287Z</updated>
    
    <content type="html"><![CDATA[<h1 id="核心原理和流程"><a href="#核心原理和流程" class="headerlink" title="核心原理和流程"></a>核心原理和流程</h1><h3 id="Step1，数据预处理"><a href="#Step1，数据预处理" class="headerlink" title="Step1，数据预处理"></a>Step1，数据预处理</h3><p>• 知识库构建：收集并整理文档、网页、数据库等多源数据，构<br>建外部知识库。<br>• 文档分块：将文档切分为适当大小的片段（chunks），以便后<br>续检索。分块策略需要在语义完整性与检索效率之间取得平衡。<br>• 向量化处理：使用嵌入模型（如BGE、M3E、Chinese-Alpaca-2<br>等）将文本块转换为向量，并存储在向量数据库中</p><h3 id="Step2，检索阶段"><a href="#Step2，检索阶段" class="headerlink" title="Step2，检索阶段"></a>Step2，检索阶段</h3><p>查询处理：将用户输入的问题转换为向量，并在向量数据库中进<br>行相似度检索，找到最相关的文本片段。<br>重排序：对检索结果进行相关性排序，选择最相关的片段作为生<br>成阶段的输入</p><h3 id="Step3，生成阶段"><a href="#Step3，生成阶段" class="headerlink" title="Step3，生成阶段"></a>Step3，生成阶段</h3><p>上下文组装：将检索到的文本片段与用户问题结合，形成增强的<br>上下文输入。<br>生成回答：大语言模型基于增强的上下文生成最终回答。</p><h2 id="RAG的步骤："><a href="#RAG的步骤：" class="headerlink" title="RAG的步骤："></a>RAG的步骤：</h2><pre><code>Indexing =&gt; 如何更好地把知识存起来。Retrieval =&gt; 如何在大量的知识中，找到一小部分有用的，给到模型参考。Generation =&gt; 如何结合用户的提问和检索到的知识，让模型生成有用的答案。</code></pre><h2 id="embedding-模型选择"><a href="#embedding-模型选择" class="headerlink" title="embedding 模型选择"></a>embedding 模型选择</h2><h3 id="通用文本嵌入模型"><a href="#通用文本嵌入模型" class="headerlink" title="通用文本嵌入模型"></a>通用文本嵌入模型</h3><pre><code>BGE-M3（智源研究院）• 特点：支持100+语言，输入长度达8192 tokens，融合密集、稀疏、多向量混合检索，适合跨语言长文档检索。• 适用场景：跨语言长文档检索、高精度RAG应用。text-embedding-3-large（OpenAI）• 特点：向量维度3072，长文本语义捕捉能力强，英文表现优秀。• 适用场景：英文内容优先的全球化应用。Jina-embeddings-v2（Jina AI）• 特点：参数量仅35M，支持实时推理（RT&lt;50ms），适合轻量化部署。• 适用场景：轻量级文本处理、实时推理任务。</code></pre><h3 id="中文嵌入模型"><a href="#中文嵌入模型" class="headerlink" title="中文嵌入模型"></a>中文嵌入模型</h3><pre><code>xiaobu-embedding-v2• 特点：针对中文语义优化，语义理解能力强。• 适用场景：中文文本分类、语义检索。M3E-Turbo• 特点：针对中文优化的轻量模型，适合本地私有化部署。• 适用场景：中文法律、医疗领域检索任务。stella-mrl-large-zh-v3.5-1792• 特点：处理大规模中文数据能力强，捕捉细微语义关系。• 适用场景：中文文本高级语义分析、自然语言处理任务。</code></pre><h3 id="指令驱动与复杂任务模型"><a href="#指令驱动与复杂任务模型" class="headerlink" title="指令驱动与复杂任务模型"></a>指令驱动与复杂任务模型</h3><pre><code>gte-Qwen2-7B-instruct（阿里巴巴）• 特点：基于Qwen大模型微调，支持代码与文本跨模态检索。• 适用场景：复杂指令驱动任务、智能问答系统。E5-mistral-7B（Microsoft）• 特点：基于Mistral架构，Zero-shot任务表现优异。• 适用场景：动态调整语义密度的复杂系统。</code></pre><h3 id="企业级与复杂系统"><a href="#企业级与复杂系统" class="headerlink" title="企业级与复杂系统"></a>企业级与复杂系统</h3><pre><code>BGE-M3（智源研究院）• 特点：适合企业级部署，支持混合检索。• 适用场景：企业级语义检索、复杂RAG应用。E5-mistral-7B（Microsoft）• 特点：适合企业级部署，支持指令微调。• 适用场景：需要动态调整语义密度的复杂系统。 </code></pre><h3 id="相比于LLM，RAG的优势在哪里"><a href="#相比于LLM，RAG的优势在哪里" class="headerlink" title="相比于LLM，RAG的优势在哪里"></a>相比于LLM，RAG的优势在哪里</h3><pre><code>效率与成本：LLM处理长上下文时计算资源消耗大，响应时间增加。RAG通过检索相关片段，减少输入长度。知识更新：LLM的知识截止于训练数据，无法实时更新。RAG可以连接外部知识库，增强时效性。可解释性：RAG的检索过程透明，用户可查看来源，增强信任。LLM的生成过程则较难追溯。定制化：RAG可针对特定领域定制检索系统，提供更精准的结果，而LLM的通用性可能无法满足特定需求。数据隐私：RAG允许在本地或私有数据源上检索，避免敏感数据上传云端，适合隐私要求高的场景。</code></pre><h3 id="如果你提了一个问题，大语言模型并没有很好的回答我们。"><a href="#如果你提了一个问题，大语言模型并没有很好的回答我们。" class="headerlink" title="如果你提了一个问题，大语言模型并没有很好的回答我们。"></a>如果你提了一个问题，大语言模型并没有很好的回答我们。</h3><p>出现问题的原因有以下几个：</p><pre><code>1.你的问题很模糊，不够精确，所以大语言模型并不能很好的回答我们，涉及提示词工程。2.大语言模型缺少及时的知识，或者知识不够新，所以模型不能很好的回答我们，涉及RAG技术（本地知识库的搭建），3.模型里面的内容是有问题的，所以模型不能很好的回答我们，涉及模型的微调。</code></pre><p><img src="/images/pasted-27.png" alt="upload successful"></p><h1 id="外部知识"><a href="#外部知识" class="headerlink" title="外部知识"></a>外部知识</h1><h2 id="embedding-模型选择-1"><a href="#embedding-模型选择-1" class="headerlink" title="embedding 模型选择"></a>embedding 模型选择</h2><pre><code>https://huggingface.co/spaces/mteb/leaderboard</code></pre><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;核心原理和流程&quot;&gt;&lt;a href=&quot;#核心原理和流程&quot; class=&quot;headerlink&quot; title=&quot;核心原理和流程&quot;&gt;&lt;/a&gt;核心原理和流程&lt;/h1&gt;&lt;h3 id=&quot;Step1，数据预处理&quot;&gt;&lt;a href=&quot;#Step1，数据预处理&quot; class=&quot;he</summary>
      
    
    
    
    <category term="ai" scheme="http://yoursite.com/categories/ai/"/>
    
    
    <category term="ai" scheme="http://yoursite.com/tags/ai/"/>
    
  </entry>
  
  <entry>
    <title>ai开发工具整理</title>
    <link href="http://yoursite.com/2025/03/29/ai%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E6%95%B4%E7%90%86/"/>
    <id>http://yoursite.com/2025/03/29/ai%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E6%95%B4%E7%90%86/</id>
    <published>2025-03-29T02:23:00.000Z</published>
    <updated>2025-11-14T02:44:27.205Z</updated>
    
    <content type="html"><![CDATA[<h1 id="开发工具"><a href="#开发工具" class="headerlink" title="开发工具"></a>开发工具</h1><blockquote class="pullquote mindmap mindmap-md"><ul><li>ai开发<ul><li>ai本地部署和应用<ul><li>ollama</li><li><a href="https://github.com/vllm-project/vllm">vllm</a></li><li>SGLang</li><li><a href="https://inference.readthedocs.io/zh-cn">Xinfernce</a></li><li><a href="https://lmstudio.ai/">LMStudio</a></li></ul></li><li>ai agent工作流<ul><li><a href="https://dify.ai/">dify</a> </li><li><a href="https://www.coze.com/">Coze</a></li><li>cherry studio</li><li><a href="https://anythingllm.com/">anything llm</a></li><li><a href="https://n8n.io/">n8n</a></li></ul></li><li>Embedding（向量模型）<ul><li>通用文本<ul><li>BGE-M3（智源研究院）</li><li>text-embedding-3-large</li><li>Jina-embeddings-v2</li></ul></li><li>中文嵌入模型<ul><li>xiaobu-embedding-v2</li><li>M3E-Turbo</li><li>stella-mrl-large-zh-v3.5-1792</li></ul></li></ul></li><li>预测模型<ul><li>XGBoost</li><li>LightGBM</li><li>CatBoost</li></ul></li><li>RAG(检索增强生成)<ul><li>NativeRAG</li></ul></li><li>ai聊天入口<ul><li>客户端<ul><li>chat box</li><li>ChatWise</li></ul></li><li>聊天插件<ul><li>Page Assist</li></ul></li><li>服务端<ul><li>LobeChat</li></ul></li></ul></li><li>自助式数据报表开发<ul><li>text2sql</li><li><a href="https://dataease.cn/sqlbot">sqlbot</a></li></ul></li><li>ai微调<ul><li><a href="https://github.com/hiyouga/LLaMA-Factory">LLama-Factory</a></li></ul></li><li>多任务应用开发<ul><li><a href="https://www.langchain.com/">langchain</a></li><li>LlamaIndex</li></ul></li><li>模型库<ul><li><a href="https://modelscope.cn/models">模型库</a></li></ul></li><li>算力租用<ul><li><a href="https://www.autodl.com/home">autodl</a></li></ul></li><li>api接入<ul><li><a href="https://dashscope.aliyun.com/">dashscope</a></li><li>阿里云百炼</li></ul></li><li>ai插件网站<ul><li><a href="https://huggingface.co/spaces/mteb/leaderboard">huggingface</a></li></ul></li></ul></li></ul></blockquote><h1 id="详解"><a href="#详解" class="headerlink" title="详解"></a>详解</h1><h3 id="ai-agent工作流工具整理"><a href="#ai-agent工作流工具整理" class="headerlink" title="ai agent工作流工具整理"></a>ai agent工作流工具整理</h3><p>dify 开源，可以私有化搭建<br>coze 抖音平台，方便快速搭建。</p><h3 id="提示词工程"><a href="#提示词工程" class="headerlink" title="提示词工程"></a>提示词工程</h3><p>大模型会有幻觉，知识图谱可以人工检测，生成知识库。<br>chatBI，通过聊天生成报表。<br>firecrawl 把文件转成markdown，灌输给ai</p><h3 id="常用预测（分类，回归）模型"><a href="#常用预测（分类，回归）模型" class="headerlink" title="常用预测（分类，回归）模型"></a>常用预测（分类，回归）模型</h3><pre><code>分类算法：LR，SVN，KNN树模型：GBDT，XGBoost，LightGBM，CatBoost，NGBoost</code></pre><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;开发工具&quot;&gt;&lt;a href=&quot;#开发工具&quot; class=&quot;headerlink&quot; title=&quot;开发工具&quot;&gt;&lt;/a&gt;开发工具&lt;/h1&gt;&lt;blockquote class=&quot;pullquote mindmap mindmap-md&quot;&gt;&lt;ul&gt;
&lt;li&gt;ai开发&lt;ul</summary>
      
    
    
    
    <category term="ai" scheme="http://yoursite.com/categories/ai/"/>
    
    
    <category term="ai" scheme="http://yoursite.com/tags/ai/"/>
    
  </entry>
  
  <entry>
    <title>服务器运维工具整理</title>
    <link href="http://yoursite.com/2025/03/20/%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7%E6%95%B4%E7%90%86/"/>
    <id>http://yoursite.com/2025/03/20/%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7%E6%95%B4%E7%90%86/</id>
    <published>2025-03-19T21:35:00.000Z</published>
    <updated>2025-03-25T09:08:42.274Z</updated>
    
    <content type="html"><![CDATA[<blockquote class="pullquote mindmap mindmap-md"><ul><li>top命令增强<ul><li><a href="https://www.warmjoke.com/2025/02/02/atop/">atop</a>历史top信息记录和查找</li><li><a href="https://github.com/aristocratos/btop">btop</a></li></ul></li><li>挂载  <ul><li><a href="https://github.com/libfuse/sshfs">SSHFS</a></li></ul></li></ul></blockquote><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote class=&quot;pullquote mindmap mindmap-md&quot;&gt;&lt;ul&gt;
&lt;li&gt;top命令增强&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.warmjoke.com/2025/02/02/atop/&quot;&gt;atop&lt;/a&gt;历史top信</summary>
      
    
    
    
    <category term="运维" scheme="http://yoursite.com/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="运维" scheme="http://yoursite.com/tags/%E8%BF%90%E7%BB%B4/"/>
    
  </entry>
  
  <entry>
    <title>ai工具整理</title>
    <link href="http://yoursite.com/2025/03/03/ai%E7%9F%AD%E8%A7%86%E9%A2%91%E5%88%9B%E4%BD%9C%E6%95%B4%E7%90%86/"/>
    <id>http://yoursite.com/2025/03/03/ai%E7%9F%AD%E8%A7%86%E9%A2%91%E5%88%9B%E4%BD%9C%E6%95%B4%E7%90%86/</id>
    <published>2025-03-03T09:27:15.000Z</published>
    <updated>2025-03-29T02:23:21.735Z</updated>
    
    <content type="html"><![CDATA[<h3 id="短视频开发"><a href="#短视频开发" class="headerlink" title="短视频开发"></a>短视频开发</h3><blockquote class="pullquote mindmap mindmap-md"><ul><li>短视频工具<ul><li>通过文本生产视频<ul><li><a href="https://hailuoai.com/">海螺ai</a></li></ul></li><li>去码，图片修复<ul><li><a href="https://www.codeformer.cn/">CodeFormer</a></li></ul></li><li>通过图片生产唱歌视频ai<ul><li><a href="https://www.e-m-o.ai/">emo ai</a></li></ul></li><li>P图</li><li>魔力橡皮擦<a href="https://magicstudio.com/zh/magiceraser/">Magic Eraser</a></li><li>视频剪辑<ul><li><a href="https://github.com/linyqh/NarratoAI">NarratoAI</a></li></ul></li><li>海报生成<br><a href="https://github.com/THUDM/CogView4">CogView4</a></li><li>图生视频<br><a href="https://www.vidu.cn/">Vidu</a></li></ul></li></ul></blockquote><h3 id="代码开发工具"><a href="#代码开发工具" class="headerlink" title="代码开发工具"></a>代码开发工具</h3><blockquote class="pullquote mindmap mindmap-md"><ul><li>快速开发<ul><li><a href="https://www.trae.ai/">字节Trae</a></li><li><a href="https://www.codeflying.net/">码上飞</a></li><li><a href="https://github.com/FellouAI/eko">Eko</a></li></ul></li><li>数据库交互<ul><li>[AskYourDatabase]收费(<a href="https://www.askyourdatabase.com/pricing">https://www.askyourdatabase.com/pricing</a>)</li></ul></li></ul></blockquote><h3 id="ai-入门"><a href="#ai-入门" class="headerlink" title="ai 入门"></a>ai 入门</h3><p>llama_index</p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;短视频开发&quot;&gt;&lt;a href=&quot;#短视频开发&quot; class=&quot;headerlink&quot; title=&quot;短视频开发&quot;&gt;&lt;/a&gt;短视频开发&lt;/h3&gt;&lt;blockquote class=&quot;pullquote mindmap mindmap-md&quot;&gt;&lt;ul&gt;
&lt;li&gt;短视频</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>数据库整理</title>
    <link href="http://yoursite.com/2025/03/01/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%95%B4%E7%90%86/"/>
    <id>http://yoursite.com/2025/03/01/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%95%B4%E7%90%86/</id>
    <published>2025-03-01T03:35:46.000Z</published>
    <updated>2025-03-05T06:56:14.037Z</updated>
    
    <content type="html"><![CDATA[<blockquote class="pullquote mindmap mindmap-md"><ul><li>数据库<ul><li>时序数据库<ul><li>嵌入式数据库 DuckDB</li><li>ClickHouse</li><li>DolphinDB</li><li>InfluxDB</li></ul></li><li>关系型数据库<ul><li>mysql</li><li>oracle</li></ul></li><li>图数据库<ul><li>neo4j</li></ul></li></ul></li></ul></blockquote><p>DolphinDB<br>    适合金融时序,不开源</p><ul><li>画图工具  <ul><li><a href="https://github.com/drawdb-io/drawdb">drawdb</a></li></ul></li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote class=&quot;pullquote mindmap mindmap-md&quot;&gt;&lt;ul&gt;
&lt;li&gt;数据库&lt;ul&gt;
&lt;li&gt;时序数据库&lt;ul&gt;
&lt;li&gt;嵌入式数据库 DuckDB&lt;/li&gt;
&lt;li&gt;ClickHouse&lt;/li&gt;
&lt;li&gt;DolphinDB&lt;/li</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>go工具包整理</title>
    <link href="http://yoursite.com/2025/02/27/go%E7%9A%84%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6%E6%95%B4%E7%90%86/"/>
    <id>http://yoursite.com/2025/02/27/go%E7%9A%84%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6%E6%95%B4%E7%90%86/</id>
    <published>2025-02-27T13:15:00.000Z</published>
    <updated>2025-04-01T01:34:07.837Z</updated>
    
    <content type="html"><![CDATA[<blockquote class="pullquote mindmap mindmap-md"><ul><li>go<ul><li>web框架<ul><li><a href="https://github.com/gin-gonic/gin">gin</a></li></ul></li><li>配置文件<ul><li><a href="https://github.com/spf13/viper">viper</a></li></ul></li><li>数据库连接<ul><li><a href="https://github.com/go-gorm/gorm">gorm</a></li></ul></li><li>数据操作<ul><li>goda</li><li><a href="https://github.com/gonum/gonum">gonum</a></li></ul></li><li>微服务<ul><li>go-kit</li></ul></li><li>集成框架<ul><li><a href="https://goframe.org.cn/">goframe</a></li></ul></li><li>图形验证码<ul><li><a href="https://github.com/mojocn/base64Captcha">base64Captcha</a></li></ul></li></ul></li></ul></blockquote><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote class=&quot;pullquote mindmap mindmap-md&quot;&gt;&lt;ul&gt;
&lt;li&gt;go&lt;ul&gt;
&lt;li&gt;web框架&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/gin-gonic/gin&quot;&gt;gin&lt;/a&gt;&lt;/li&gt;
&lt;</summary>
      
    
    
    
    <category term="go" scheme="http://yoursite.com/categories/go/"/>
    
    
    <category term="go" scheme="http://yoursite.com/tags/go/"/>
    
  </entry>
  
  <entry>
    <title>运维历史信息监控-atop</title>
    <link href="http://yoursite.com/2025/02/02/atop/"/>
    <id>http://yoursite.com/2025/02/02/atop/</id>
    <published>2025-02-02T01:30:00.000Z</published>
    <updated>2025-04-11T06:25:12.017Z</updated>
    
    <content type="html"><![CDATA[<h3 id="安装命令"><a href="#安装命令" class="headerlink" title="安装命令"></a>安装命令</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install atop -y</span><br></pre></td></tr></table></figure><h3 id="配置并启动-atop"><a href="#配置并启动-atop" class="headerlink" title="配置并启动 atop"></a>配置并启动 atop</h3><p>参考以下步骤，配置 atop 监控周期及日志保留时间。</p><h4 id="修改配置"><a href="#修改配置" class="headerlink" title="修改配置"></a>修改配置</h4><p>vim &#x2F;etc&#x2F;sysconfig&#x2F;atop</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">将 LOGINTERVAL=600 修改为 LOGINTERVAL=30，表示将默认的600s监控周期修改为30s。建议修改为30s，您可结合实际情况进行修改。</span><br><span class="line">将 LOGGENERATIONS=28 修改为 LOGGENERATIONS=7，表示将默认的日志保留时间28天修改为7天。为避免 atop 长时间运行占用太多磁盘空间，建议修改为7天，您可结合实际情况进行修改。</span><br><span class="line">修改完成后如下图所示：</span><br></pre></td></tr></table></figure><h3 id="重启配置"><a href="#重启配置" class="headerlink" title="重启配置"></a>重启配置</h3><p>systemctl restart atop</p><h3 id="分析日志"><a href="#分析日志" class="headerlink" title="分析日志"></a>分析日志</h3><p>atop -r &#x2F;var&#x2F;log&#x2F;atop&#x2F;atop_2021xxxx</p><h3 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">您可在打开日志文件后，使用以下命令筛选所需数据：</span><br><span class="line">c：按照进程的 CPU 使用率降序筛选。</span><br><span class="line">m：按照进程的内存使用率降序筛选。</span><br><span class="line">d：按照进程的磁盘使用率降序筛选。</span><br><span class="line">a：按照进程资源综合使用率进行降序筛选。</span><br><span class="line">n：按照进程的网络使用率进行降序筛选（使用此命令需安装额外的内核模块，默认不支持）。</span><br><span class="line">t：跳转到下一个监控采集点。</span><br><span class="line">T：跳转到上一个监控采集点。</span><br><span class="line">b：指定时间点，格式为 YYYYMMDDhhmm。</span><br></pre></td></tr></table></figure><h4 id="查看指定日期内的历史指标日志。示例中，指定日期为2024年11月06日。"><a href="#查看指定日期内的历史指标日志。示例中，指定日期为2024年11月06日。" class="headerlink" title="查看指定日期内的历史指标日志。示例中，指定日期为2024年11月06日。"></a>查看指定日期内的历史指标日志。示例中，指定日期为2024年11月06日。</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">atop -r 20250206</span><br></pre></td></tr></table></figure><h4 id="查看指定日期内自指定时间起的历史指标日志。示例中，指定日期为2024年11月06日，开始时间为14-00。"><a href="#查看指定日期内自指定时间起的历史指标日志。示例中，指定日期为2024年11月06日，开始时间为14-00。" class="headerlink" title="查看指定日期内自指定时间起的历史指标日志。示例中，指定日期为2024年11月06日，开始时间为14:00。"></a>查看指定日期内自指定时间起的历史指标日志。示例中，指定日期为2024年11月06日，开始时间为14:00。</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">atop -r 20241106 -b 14:00</span><br></pre></td></tr></table></figure><h4 id="查看指定日期内，指定时间段的历史指标日志。示例中，指定的日期为2024年11月5日，时间段为00-04至00-08。"><a href="#查看指定日期内，指定时间段的历史指标日志。示例中，指定的日期为2024年11月5日，时间段为00-04至00-08。" class="headerlink" title="查看指定日期内，指定时间段的历史指标日志。示例中，指定的日期为2024年11月5日，时间段为00:04至00:08。"></a>查看指定日期内，指定时间段的历史指标日志。示例中，指定的日期为2024年11月5日，时间段为00:04至00:08。</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">atop -r 20241105 -b 00:04 -e 00:08</span><br></pre></td></tr></table></figure><h3 id="主要参数说明如下"><a href="#主要参数说明如下" class="headerlink" title="主要参数说明如下"></a>主要参数说明如下</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">ATOP 行：主机名、信息采样日期和时间点。</span><br><span class="line">PRC 行：进程整体运行情况。</span><br><span class="line">sys 及 user：CPU 被用于处理进程时，进程在内核态及用户态所占 CPU 的时间比例。</span><br><span class="line">#proc：进程总数。</span><br><span class="line">#zombie：僵死进程的数量。</span><br><span class="line">#exit：Atop 采样周期期间退出的进程数量。</span><br><span class="line">CPU 行：CPU 整体（即多核 CPU 作为一个整体 CPU 资源）的使用情况。CPU 行的各字段数值相加结果为 100%，N 为 CPU 核数。</span><br><span class="line">sys 及 user：CPU 被用于处理进程时，进程在内核态及用户态所占 CPU 的时间比例。</span><br><span class="line">irq：CPU 被用于处理中断的时间比例。</span><br><span class="line">idle：CPU 处在完全空闲状态的时间比例。</span><br><span class="line">wait：CPU 处在“进程等待磁盘 IO 导致 CPU 空闲”状态的时间比例。</span><br><span class="line">CPL 行：CPU 负载情况。</span><br><span class="line">avg1、avg5 和 avg15：过去1分钟、5分钟和15分钟内运行队列中的平均进程数量。</span><br><span class="line">csw：指示上下文交换次数。</span><br><span class="line">intr：指示中断发生次数。</span><br><span class="line">MEM 行：内存的使用情况。</span><br><span class="line">tot：物理内存总量。</span><br><span class="line">cache ：用于页缓存的内存大小。</span><br><span class="line">buff：用于文件缓存的内存大小。</span><br><span class="line">slab：系统内核占用的内存大小。</span><br><span class="line">SWP 行：交换空间的使用情况。</span><br><span class="line">tot：交换区总量。</span><br><span class="line">free：空闲交换空间大小。</span><br><span class="line">PAG 行：虚拟内存分页情况</span><br><span class="line">swin 及 swout：换入和换出内存页数。</span><br><span class="line">DSK 行：磁盘使用情况，每一个磁盘设备对应一列。如果有 sdb 设备，那么增加一行 DSK 信息。</span><br><span class="line">sda：磁盘设备标识。</span><br><span class="line">busy：磁盘忙时比例。</span><br><span class="line">read 及 write：读、写请求数量。</span><br><span class="line">NET 行：多列 NET 展示了网络状况，包括传输层（TCP 和 UDP）、IP 层以及各活动的网口信息。</span><br><span class="line">xxxxxi：各层或活动网口收包数目。</span><br><span class="line">xxxxxo：各层或活动网口发包数目。</span><br></pre></td></tr></table></figure><h3 id="参考操作文档"><a href="#参考操作文档" class="headerlink" title="参考操作文档"></a>参考操作文档</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://cloud.tencent.com/document/product/213/61086</span><br><span class="line">https://help.aliyun.com/zh/ecs/use-cases/use-the-atop-tool-to-monitor-linux-system-metrics?spm=5176.smartservice_service_create_ticket_step_2.0.0.6c8543ecjTvcos</span><br></pre></td></tr></table></figure><h3 id="衍生的信息"><a href="#衍生的信息" class="headerlink" title="衍生的信息"></a>衍生的信息</h3><p><a href="https://github.com/aristocratos/btop">btop,top的增强版</a></p><p><a href="https://github.com/htop-dev/htop">htop,交互式top实现</a></p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;安装命令&quot;&gt;&lt;a href=&quot;#安装命令&quot; class=&quot;headerlink&quot; title=&quot;安装命令&quot;&gt;&lt;/a&gt;安装命令&lt;/h3&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;</summary>
      
    
    
    
    <category term="运维" scheme="http://yoursite.com/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="运维" scheme="http://yoursite.com/tags/%E8%BF%90%E7%BB%B4/"/>
    
  </entry>
  
  <entry>
    <title>rust 入门篇</title>
    <link href="http://yoursite.com/2025/01/09/rust%E5%85%A5%E9%97%A8/"/>
    <id>http://yoursite.com/2025/01/09/rust%E5%85%A5%E9%97%A8/</id>
    <published>2025-01-09T09:11:00.000Z</published>
    <updated>2025-01-09T10:52:32.467Z</updated>
    
    <content type="html"><![CDATA[<h3 id="rustc查看版本"><a href="#rustc查看版本" class="headerlink" title="rustc查看版本"></a>rustc查看版本</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rustc --version</span><br></pre></td></tr></table></figure><h3 id="cargo-查看版本"><a href="#cargo-查看版本" class="headerlink" title="cargo 查看版本"></a>cargo 查看版本</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cargo --version</span><br></pre></td></tr></table></figure><h3 id="rust-升级到最新的稳定版本"><a href="#rust-升级到最新的稳定版本" class="headerlink" title="rust 升级到最新的稳定版本"></a>rust 升级到最新的稳定版本</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rustup update stable</span><br></pre></td></tr></table></figure><h3 id="新建工程"><a href="#新建工程" class="headerlink" title="新建工程"></a>新建工程</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cargo new hello_cargo</span><br></pre></td></tr></table></figure><h3 id="构建已有的工程"><a href="#构建已有的工程" class="headerlink" title="构建已有的工程"></a>构建已有的工程</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cargo build</span><br></pre></td></tr></table></figure><h3 id="查看rustup-版本，检查是否要更新"><a href="#查看rustup-版本，检查是否要更新" class="headerlink" title="查看rustup 版本，检查是否要更新"></a>查看rustup 版本，检查是否要更新</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rustup --version </span><br></pre></td></tr></table></figure><h3 id="更新rustup"><a href="#更新rustup" class="headerlink" title="更新rustup"></a>更新rustup</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rustup self update</span><br></pre></td></tr></table></figure><h3 id="安装rust格式化"><a href="#安装rust格式化" class="headerlink" title="安装rust格式化"></a>安装rust格式化</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rustup component add rustfmt</span><br></pre></td></tr></table></figure><h2 id="多版本"><a href="#多版本" class="headerlink" title="多版本"></a>多版本</h2><h3 id="rust多版本显示"><a href="#rust多版本显示" class="headerlink" title="rust多版本显示"></a>rust多版本显示</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rustup toolchain list</span><br></pre></td></tr></table></figure><h3 id="切换rust版本"><a href="#切换rust版本" class="headerlink" title="切换rust版本"></a>切换rust版本</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rustup default aarch64-apple-darwin</span><br></pre></td></tr></table></figure><h3 id="显示rust概况"><a href="#显示rust概况" class="headerlink" title="显示rust概况"></a>显示rust概况</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rustup show</span><br></pre></td></tr></table></figure><h1 id="入门文档"><a href="#入门文档" class="headerlink" title="入门文档"></a>入门文档</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://kaisery.github.io/trpl-zh-cn/ch01-02-hello-world.html</span><br></pre></td></tr></table></figure><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;rustc查看版本&quot;&gt;&lt;a href=&quot;#rustc查看版本&quot; class=&quot;headerlink&quot; title=&quot;rustc查看版本&quot;&gt;&lt;/a&gt;rustc查看版本&lt;/h3&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;t</summary>
      
    
    
    
    <category term="rust" scheme="http://yoursite.com/categories/rust/"/>
    
    
  </entry>
  
  <entry>
    <title>python工具包导航</title>
    <link href="http://yoursite.com/2025/01/09/python%E5%90%84%E7%A7%8D%E5%B7%A5%E5%85%B7%E5%8C%85%E6%95%B4%E7%90%86/"/>
    <id>http://yoursite.com/2025/01/09/python%E5%90%84%E7%A7%8D%E5%B7%A5%E5%85%B7%E5%8C%85%E6%95%B4%E7%90%86/</id>
    <published>2025-01-09T01:42:00.000Z</published>
    <updated>2025-11-02T09:22:50.255Z</updated>
    
    <content type="html"><![CDATA[<blockquote class="pullquote mindmap mindmap-md"><ul><li>python<ul><li>基本功能<ul><li>生成requirements.txt<ul><li>pipreqs</li></ul></li><li>生成本地执行包<ul><li><a href="https://www.warmjoke.com/2024/02/26/pyinstaller%E5%BA%94%E7%94%A8%E6%95%B4%E7%90%86/">pyinstaller</a></li><li><a href="https://github.com/TanixLu/pyfuze">pyfuze</a></li></ul></li></ul></li><li>爬虫<ul><li>drissionPage</li><li>curl_cffi</li><li>selenium</li></ul></li><li>日志<ul><li>loguru</li></ul></li><li>数据处理<ul><li>pandas</li><li>numpy</li></ul></li><li>画图<ul><li>pillow</li></ul></li><li>动态包导入<ul><li>importlib</li></ul></li><li>文件操作<ul><li>shutil</li></ul></li><li>yaml配置操作<ul><li>ruamel.yaml</li></ul></li><li>命令行输入<ul><li>cmd2</li></ul></li><li>链上交互<ul><li>web3</li></ul></li><li>声音读区<ul><li>sounddevice</li><li>soundfile</li></ul></li><li>进度条<ul><li>tqdm</li></ul></li><li>环境变量读取<ul><li>dotenv</li></ul></li><li>web<ul><li><a href="https://uvicorn.dev/">Uvicorn</a></li><li>falsk</li></ul></li></ul></li></ul></blockquote><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote class=&quot;pullquote mindmap mindmap-md&quot;&gt;&lt;ul&gt;
&lt;li&gt;python&lt;ul&gt;
&lt;li&gt;基本功能&lt;ul&gt;
&lt;li&gt;生成requirements.txt&lt;ul&gt;
&lt;li&gt;pipreqs&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;l</summary>
      
    
    
    
    <category term="python" scheme="http://yoursite.com/categories/python/"/>
    
    
  </entry>
  
  <entry>
    <title>minicoda量化环境配置</title>
    <link href="http://yoursite.com/2024/12/30/minicoda%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"/>
    <id>http://yoursite.com/2024/12/30/minicoda%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/</id>
    <published>2024-12-30T04:56:00.000Z</published>
    <updated>2024-12-30T05:27:53.039Z</updated>
    
    <content type="html"><![CDATA[<h1 id="minicoda-安装"><a href="#minicoda-安装" class="headerlink" title="minicoda 安装"></a>minicoda 安装</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p ~/miniconda3</span><br><span class="line">wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh -O ~/miniconda3/miniconda.sh</span><br><span class="line">bash ~/miniconda3/miniconda.sh -b -u -p ~/miniconda3</span><br><span class="line">rm ~/miniconda3/miniconda.sh</span><br><span class="line">source ~/miniconda3/bin/activate</span><br><span class="line">conda init --all</span><br></pre></td></tr></table></figure><h1 id="为什么安装-minicoda"><a href="#为什么安装-minicoda" class="headerlink" title="为什么安装 minicoda"></a>为什么安装 minicoda</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">服务器硬盘不够，anaconda3 基本上需要占用 8G得硬盘空间，小门小户有点受不了。minicode的初始包基本是1G以内。</span><br></pre></td></tr></table></figure><p>安装minicoda 之后的基础服务器配置，初始化的系统盘5.3g左右,相对anaconda3节省很多的空间。</p><p><img src="/images/pasted-25.png" alt="upload successful"></p><h1 id="创建最新的量化环境"><a href="#创建最新的量化环境" class="headerlink" title="创建最新的量化环境"></a>创建最新的量化环境</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda create -n py312 python=3.12.7</span><br></pre></td></tr></table></figure><h1 id="创建python默认环境"><a href="#创建python默认环境" class="headerlink" title="创建python默认环境"></a>创建python默认环境</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi ~/.bashrc</span><br></pre></td></tr></table></figure><p>设置成如下的配置。</p><p><img src="/images/pasted-26.png" alt="upload successful"></p><h1 id="安装supervisor"><a href="#安装supervisor" class="headerlink" title="安装supervisor"></a>安装supervisor</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yum install -y supervisor</span><br><span class="line">systemctl enable supervisord # 开机自启动</span><br><span class="line">systemctl start supervisord # 启动supervisord服务</span><br><span class="line">systemctl status supervisord # 查看supervisord服务状态</span><br><span class="line">ps -ef|grep supervisord # 查看是否存在supervisord进程</span><br></pre></td></tr></table></figure><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;minicoda-安装&quot;&gt;&lt;a href=&quot;#minicoda-安装&quot; class=&quot;headerlink&quot; title=&quot;minicoda 安装&quot;&gt;&lt;/a&gt;minicoda 安装&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;</summary>
      
    
    
    
    <category term="python" scheme="http://yoursite.com/categories/python/"/>
    
    
    <category term="量化" scheme="http://yoursite.com/tags/%E9%87%8F%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>drissionPage 爬虫攻略</title>
    <link href="http://yoursite.com/2024/12/30/drissionPage-%E7%88%AC%E8%99%AB%E6%94%BB%E7%95%A5/"/>
    <id>http://yoursite.com/2024/12/30/drissionPage-%E7%88%AC%E8%99%AB%E6%94%BB%E7%95%A5/</id>
    <published>2024-12-30T01:51:00.000Z</published>
    <updated>2024-12-30T02:53:36.024Z</updated>
    
    <content type="html"><![CDATA[<h1 id="简单的代码示例"><a href="#简单的代码示例" class="headerlink" title="简单的代码示例"></a>简单的代码示例</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> DrissionPage <span class="keyword">import</span> WebPage, ChromiumOptions</span><br><span class="line"><span class="comment"># 基于谷歌浏览器的配置</span></span><br><span class="line">options = ChromiumOptions()</span><br><span class="line"><span class="comment"># 无头设置</span></span><br><span class="line">options.headless(<span class="literal">True</span>)</span><br><span class="line">options.set_argument(<span class="string">&#x27;--no-sandbox&#x27;</span>)</span><br><span class="line"><span class="comment"># 可以设置代理的配置</span></span><br><span class="line"><span class="keyword">if</span> proxy:</span><br><span class="line">    options.set_proxy(proxy[<span class="string">&#x27;http&#x27;</span> <span class="keyword">if</span> <span class="string">&#x27;http&#x27;</span> <span class="keyword">in</span> proxy <span class="keyword">else</span> <span class="string">&#x27;https&#x27;</span>])</span><br><span class="line"><span class="comment"># 初始化 SessionPage 对象</span></span><br><span class="line">page = WebPage(timeout=<span class="number">50</span>, chromium_options=options)</span><br><span class="line"> page.get(baseurl)</span><br><span class="line">page.wait.ele_displayed(<span class="string">&#x27;__APP&#x27;</span>)</span><br><span class="line"><span class="keyword">match</span> = re.search(<span class="string">r&#x27;href=&quot;([^&quot;]*delisting\?[^&quot;]*)&quot;&#x27;</span>, page.html)</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">match</span>:</span><br><span class="line">   <span class="built_in">print</span>(<span class="string">&quot;&quot;</span><span class="number">12313</span><span class="string">&quot;)</span></span><br></pre></td></tr></table></figure><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>和 selenium 类似，本来就是从 selenium 发展而来，但也可以实现request的方法，既可以爬去网页，也可以直接调用请求。</p><h1 id="官网"><a href="#官网" class="headerlink" title="官网"></a>官网</h1><p><a href="https://drissionpage.cn/">https://drissionpage.cn/</a></p><h1 id="开源代码"><a href="#开源代码" class="headerlink" title="开源代码"></a>开源代码</h1><p><a href="https://gitee.com/PLA-huiziqin/DrissionPage?skip_mobile=true">https://gitee.com/PLA-huiziqin/DrissionPage?skip_mobile=true</a></p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;简单的代码示例&quot;&gt;&lt;a href=&quot;#简单的代码示例&quot; class=&quot;headerlink&quot; title=&quot;简单的代码示例&quot;&gt;&lt;/a&gt;简单的代码示例&lt;/h1&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class</summary>
      
    
    
    
    <category term="python" scheme="http://yoursite.com/categories/python/"/>
    
    
    <category term="爬虫" scheme="http://yoursite.com/tags/%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>sublime命令整理</title>
    <link href="http://yoursite.com/2024/11/21/sublime%E5%91%BD%E4%BB%A4%E6%95%B4%E7%90%86/"/>
    <id>http://yoursite.com/2024/11/21/sublime%E5%91%BD%E4%BB%A4%E6%95%B4%E7%90%86/</id>
    <published>2024-11-21T08:08:29.000Z</published>
    <updated>2024-11-21T08:20:37.519Z</updated>
    
    <content type="html"><![CDATA[<h3 id="正则表达式数据替换"><a href="#正则表达式数据替换" class="headerlink" title="正则表达式数据替换"></a>正则表达式数据替换</h3><p>排除cid之后的字符串</p><p><img src="/images/pasted-22.png" alt="upload successful"></p><p>打开正则表达式模式</p><p><img src="/images/pasted-23.png" alt="upload successful"></p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;正则表达式数据替换&quot;&gt;&lt;a href=&quot;#正则表达式数据替换&quot; class=&quot;headerlink&quot; title=&quot;正则表达式数据替换&quot;&gt;&lt;/a&gt;正则表达式数据替换&lt;/h3&gt;&lt;p&gt;排除cid之后的字符串&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/paste</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>excel命令整理</title>
    <link href="http://yoursite.com/2024/10/29/excel%E5%91%BD%E4%BB%A4%E6%95%B4%E7%90%86/"/>
    <id>http://yoursite.com/2024/10/29/excel%E5%91%BD%E4%BB%A4%E6%95%B4%E7%90%86/</id>
    <published>2024-10-29T15:09:00.000Z</published>
    <updated>2024-10-29T15:28:17.915Z</updated>
    
    <content type="html"><![CDATA[<p>最近在整理对虾养殖的收入和支出相关的数据，发现excel里面的一些命令挺好用的，所以对自己需要用的命令做下整理</p><h1 id="求和"><a href="#求和" class="headerlink" title="求和"></a>求和</h1><h2 id="SUMIF"><a href="#SUMIF" class="headerlink" title="SUMIF"></a>SUMIF</h2><pre><code>=SUMIF(A2:A5, &quot;张三&quot;, C2:C5)翻译:c=0 for(An :(A2...A5))&#123;    if(An==&quot;张三&quot;)&#123;        c=Cn+c      &#125;&#125;return c</code></pre><h2 id="SUM"><a href="#SUM" class="headerlink" title="SUM"></a>SUM</h2><pre><code>=SUM(A2:A5)</code></pre><h2 id="SUMIFS"><a href="#SUMIFS" class="headerlink" title="SUMIFS"></a>SUMIFS</h2><pre><code>=SUMIFS(C2:C5, A2:A5, &quot;张三&quot;, B2:B5, &quot;产品B&quot;)</code></pre><p>  这个公式的意思是：在C2:C5的范围内求和，但是只包括A2:A5范围内是“张三”且B2:B5范围内是“产品B”的行。</p><h1 id="逻辑判断"><a href="#逻辑判断" class="headerlink" title="逻辑判断"></a>逻辑判断</h1><h2 id="IF"><a href="#IF" class="headerlink" title="IF"></a>IF</h2><pre><code>  =IF(B2&gt;=90, &quot;A&quot;, IF(B2&gt;=80, &quot;B&quot;, &quot;C&quot;))</code></pre><p>这个公式的意思是：如果B2单元格的成绩大于等于90分，则返回”A”；如果成绩大于等于80分但小于90分，则返回”B”；如果成绩小于80分，则返回”C”。</p><h3 id="应用到整列"><a href="#应用到整列" class="headerlink" title="应用到整列"></a>应用到整列</h3><p>当你在C2单元格输入上述公式后，你可以通过以下步骤将其应用到整列：</p><pre><code>点击C2单元格。将鼠标指针移动到单元格的右下角，直到鼠标指针变成一个小十字。点击并拖动这个小十字向下，直到你想要应用公式的所有行。这样，Excel就会自动将公式应用到C列的每个单元格，并且根据B列对应的成绩计算出等级。</code></pre><h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><pre><code>确保B列的成绩数据是连续的，没有空行或非数字数据，否则公式可能会返回错误。如果你想要在公式中使用绝对引用（例如，当你复制公式到其他列时），你可以使用$符号，如$B2。这样，无论公式如何复制，引用的列始终是B列。    </code></pre><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;最近在整理对虾养殖的收入和支出相关的数据，发现excel里面的一些命令挺好用的，所以对自己需要用的命令做下整理&lt;/p&gt;
&lt;h1 id=&quot;求和&quot;&gt;&lt;a href=&quot;#求和&quot; class=&quot;headerlink&quot; title=&quot;求和&quot;&gt;&lt;/a&gt;求和&lt;/h1&gt;&lt;h2 id=&quot;SU</summary>
      
    
    
    
    <category term="excel" scheme="http://yoursite.com/categories/excel/"/>
    
    
    <category term="excel" scheme="http://yoursite.com/tags/excel/"/>
    
  </entry>
  
  <entry>
    <title>openssh制作rpm包对线上环境升级</title>
    <link href="http://yoursite.com/2024/09/28/openssh%E5%88%B6%E4%BD%9Crpm%E5%8C%85/"/>
    <id>http://yoursite.com/2024/09/28/openssh%E5%88%B6%E4%BD%9Crpm%E5%8C%85/</id>
    <published>2024-09-28T01:54:00.000Z</published>
    <updated>2024-10-06T08:07:20.095Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前置原因"><a href="#前置原因" class="headerlink" title="前置原因"></a>前置原因</h1><p>为了通过等保3，扫码提示一堆的openssh错误，openssh目前没有针对centos的最新包rpm，网上都是一些自行编译源码，然后升级的教程。但有一个担心，因为自行编译源吗，需要安装依赖包，有可能导致线上运行环境不稳定，所以还是想着自己生成rpm包，然后在测试环境测试通过之后再放到线上环境。<br><img src="/images/pasted-20.png" alt="upload successful"></p><h1 id="操作流程"><a href="#操作流程" class="headerlink" title="操作流程"></a>操作流程</h1><h2 id="依赖安装"><a href="#依赖安装" class="headerlink" title="依赖安装"></a>依赖安装</h2><p>yum install rpm-build zlib-devel openssl-devel gcc perl-devel libXt-devel imake gtk2-devel krb5-devel pam-devel perl-IPC-Cmd</p><h2 id="下载对应的源码包"><a href="#下载对应的源码包" class="headerlink" title="下载对应的源码包"></a>下载对应的源码包</h2><p>下载最新的依赖包 x11-ssh-askpass包</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/sigmavirus24/x11-ssh-askpass</span><br></pre></td></tr></table></figure><p>下载最新的依赖包 openssl包</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://openssl-library.org/source/</span><br></pre></td></tr></table></figure><p>下载最新openssh</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.openssh.com/portable.html</span><br></pre></td></tr></table></figure><h2 id="备份升级前配置文件"><a href="#备份升级前配置文件" class="headerlink" title="备份升级前配置文件"></a>备份升级前配置文件</h2><p>下面这两个文件如果不做备份，会在升级后自动修改</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/etc/pam.d/sshd</span><br><span class="line">/etc/ssh/sshd_config</span><br></pre></td></tr></table></figure><h2 id="编译openssl"><a href="#编译openssl" class="headerlink" title="编译openssl"></a>编译openssl</h2><h4 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Can&#x27;t locate IPC/Cmd.pm in @INC (you may need to install the IPC::Cmd module)</span><br></pre></td></tr></table></figure><p>解决方案：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install perl-IPC-Cmd</span><br></pre></td></tr></table></figure><h3 id="安装过程"><a href="#安装过程" class="headerlink" title="安装过程"></a>安装过程</h3><h4 id="解压"><a href="#解压" class="headerlink" title="解压"></a>解压</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf openssl-3.3.2.tar.gz </span><br><span class="line">cd openssl-3.3.2/</span><br></pre></td></tr></table></figure><h4 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./config --prefix=/usr/local/openssl shared -fPIC</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><h4 id="检查函数库"><a href="#检查函数库" class="headerlink" title="检查函数库"></a>检查函数库</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ldd /usr/local/openssl/bin/openssl  # 检查函数库</span><br></pre></td></tr></table></figure><h4 id="创建软链接"><a href="#创建软链接" class="headerlink" title="创建软链接"></a>创建软链接</h4><p>ln -s &#x2F;usr&#x2F;local&#x2F;openssl&#x2F;bin&#x2F;openssl &#x2F;usr&#x2F;bin&#x2F;openssl<br>ln -s &#x2F;usr&#x2F;local&#x2F;openssl&#x2F;include&#x2F;openssl &#x2F;usr&#x2F;include&#x2F;openssl</p><h4 id="添加动态链接库数据"><a href="#添加动态链接库数据" class="headerlink" title="添加动态链接库数据"></a>添加动态链接库数据</h4><p>echo “&#x2F;usr&#x2F;local&#x2F;openssl&#x2F;lib&#x2F;“ &gt;&gt; &#x2F;etc&#x2F;ld.so.conf</p><h4 id="更新函数库"><a href="#更新函数库" class="headerlink" title="更新函数库"></a>更新函数库</h4><p>ldconfig -v  </p><h4 id="检查版本"><a href="#检查版本" class="headerlink" title="检查版本"></a>检查版本</h4><p>openssl version  </p><h2 id="编译openssh"><a href="#编译openssh" class="headerlink" title="编译openssh"></a>编译openssh</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">tar xf openssh-9.6p1.tar.gz -C /home/</span><br><span class="line"></span><br><span class="line">mkdir -p /root/rpmbuild/&#123;SOURCES,SPECS&#125;</span><br><span class="line">cp /root/openssh-9.6p1.tar.gz /root/rpmbuild/SOURCES/</span><br><span class="line">cp /root/x11-ssh-askpass-1.2.4.1.tar.gz /root/rpmbuild/SOURCES/</span><br><span class="line">cp /home/openssh-9.6p1/contrib/redhat/openssh.spec /root/rpmbuild/SPECS/</span><br></pre></td></tr></table></figure><h3 id="rpmbuild-的知识介绍"><a href="#rpmbuild-的知识介绍" class="headerlink" title="rpmbuild 的知识介绍"></a>rpmbuild 的知识介绍</h3><p><a href="https://www.cnblogs.com/zhangxinglong/p/11904922.html">https://www.cnblogs.com/zhangxinglong/p/11904922.html</a></p><h2 id="rpm-构建"><a href="#rpm-构建" class="headerlink" title="rpm 构建"></a>rpm 构建</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpmbuild -ba openssh.spec </span><br></pre></td></tr></table></figure><p>执行成功的结果</p><p><img src="/images/pasted-21.png" alt="upload successful"></p><h2 id="通过rpm升级ssh版本。"><a href="#通过rpm升级ssh版本。" class="headerlink" title="通过rpm升级ssh版本。"></a>通过rpm升级ssh版本。</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -Uvh openssh-* --nodeps --force</span><br></pre></td></tr></table></figure><h2 id="重启服务"><a href="#重启服务" class="headerlink" title="重启服务"></a>重启服务</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart sshd</span><br></pre></td></tr></table></figure><h1 id="执行的时候遇到的问题"><a href="#执行的时候遇到的问题" class="headerlink" title="执行的时候遇到的问题"></a>执行的时候遇到的问题</h1><h2 id="缺少libcrypto-so-3，libssl-so-3"><a href="#缺少libcrypto-so-3，libssl-so-3" class="headerlink" title="缺少libcrypto.so.3，libssl.so.3"></a>缺少libcrypto.so.3，libssl.so.3</h2><p>拷贝openssl里面的对应包到对应的&#x2F;usr&#x2F;lib64 环境中去。</p><h1 id="相关命令解析"><a href="#相关命令解析" class="headerlink" title="相关命令解析"></a>相关命令解析</h1><h2 id="ldd"><a href="#ldd" class="headerlink" title="ldd"></a>ldd</h2><pre><code>打印程序或者库文件所依赖的共享库列表</code></pre><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><pre><code>https://wangchujiang.com/linux-command/c/ldd.html</code></pre><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;前置原因&quot;&gt;&lt;a href=&quot;#前置原因&quot; class=&quot;headerlink&quot; title=&quot;前置原因&quot;&gt;&lt;/a&gt;前置原因&lt;/h1&gt;&lt;p&gt;为了通过等保3，扫码提示一堆的openssh错误，openssh目前没有针对centos的最新包rpm，网上都是一些自行编译</summary>
      
    
    
    
    <category term="运维" scheme="http://yoursite.com/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
  </entry>
  
  <entry>
    <title>nginx自动更新</title>
    <link href="http://yoursite.com/2024/09/14/nginx/"/>
    <id>http://yoursite.com/2024/09/14/nginx/</id>
    <published>2024-09-14T05:23:00.000Z</published>
    <updated>2025-07-16T06:52:46.647Z</updated>
    
    <content type="html"><![CDATA[<h3 id="进入yum配置库"><a href="#进入yum配置库" class="headerlink" title="进入yum配置库"></a>进入yum配置库</h3><p>cd &#x2F;etc&#x2F;yum.repos.d&#x2F;</p><h3 id="创建文件"><a href="#创建文件" class="headerlink" title="创建文件"></a>创建文件</h3><p>vi nginx.repo</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[nginx]</span><br><span class="line">name=nginx repo</span><br><span class="line">baseurl=http://nginx.org/packages/centos/操作系统版本/$basearch/</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br></pre></td></tr></table></figure><h3 id="查找nginx"><a href="#查找nginx" class="headerlink" title="查找nginx"></a>查找nginx</h3><pre><code>yum search nginx</code></pre><h3 id="更新nginx"><a href="#更新nginx" class="headerlink" title="更新nginx"></a>更新nginx</h3><pre><code>yum update nginx</code></pre><h3 id="nginx升级的坑"><a href="#nginx升级的坑" class="headerlink" title="nginx升级的坑"></a>nginx升级的坑</h3><p><img src="/images/pasted-29.png" alt="upload successful"></p><p>会在配置文件中生成一个 default.conf的配置文件会覆盖我们配置的80端口，导致我们的服务出问题，浏览器返回会有缓存问题，导致以为网站正常。</p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;进入yum配置库&quot;&gt;&lt;a href=&quot;#进入yum配置库&quot; class=&quot;headerlink&quot; title=&quot;进入yum配置库&quot;&gt;&lt;/a&gt;进入yum配置库&lt;/h3&gt;&lt;p&gt;cd &amp;#x2F;etc&amp;#x2F;yum.repos.d&amp;#x2F;&lt;/p&gt;
&lt;h3 id</summary>
      
    
    
    
    <category term="运维" scheme="http://yoursite.com/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="nginx" scheme="http://yoursite.com/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>pyqt6 实现快手中控平台</title>
    <link href="http://yoursite.com/2024/07/03/pyqt6-%E5%AE%9E%E7%8E%B0%E5%BF%AB%E6%89%8B%E4%B8%AD%E6%8E%A7%E5%B9%B3%E5%8F%B0/"/>
    <id>http://yoursite.com/2024/07/03/pyqt6-%E5%AE%9E%E7%8E%B0%E5%BF%AB%E6%89%8B%E4%B8%AD%E6%8E%A7%E5%B9%B3%E5%8F%B0/</id>
    <published>2024-07-03T06:45:21.000Z</published>
    <updated>2024-07-29T14:18:41.461Z</updated>
    
    <content type="html"><![CDATA[<h1 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h1><pre><code>1.快手所有的消息汇集到中控平台。2.新消息过来需要有声音提示3.需要实现类似微信那样点击用户名，回复该用户的功能。4.消息框输入消息，按Enter键发送消息的功能。</code></pre><h1 id="需要代码实现"><a href="#需要代码实现" class="headerlink" title="需要代码实现"></a>需要代码实现</h1><h2 id="快手所有消息汇集到中控平台"><a href="#快手所有消息汇集到中控平台" class="headerlink" title="快手所有消息汇集到中控平台"></a>快手所有消息汇集到中控平台</h2><p>通过socket把快手的消息转发给中控，通过 pyqtSignal 转发给gui页面</p><p>server_socket.py</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">class Server:</span><br><span class="line"></span><br><span class="line">    def __init__(self, host, port):</span><br><span class="line">        self.data = &#x27;&#x27; # 需要发送的消息</span><br><span class="line">        self.host = host</span><br><span class="line">        self.port = port</span><br><span class="line">        self.sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">        self.outputs = []  # 流出</span><br><span class="line">        self.inputs = []  # 流入</span><br><span class="line">        self.msg_queue = &#123;&#125;  # 这个字典用来存放不同连接的消息队列</span><br><span class="line">        self.online_conversition = &#123;&#125;  # 在线用户名列表</span><br><span class="line">        self.sock.bind((self.host, self.port))  # 套接字绑定到指定地址</span><br><span class="line">        self.inputs.append(self.sock)  # 将sock加入传入列表，可以监控连接请求</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    def add_conn(self,conn):</span><br><span class="line">            self.inputs.append(conn)</span><br><span class="line">            self.outputs.append(conn)</span><br><span class="line">            self.msg_queue[conn] = queue.Queue()  # 新建conn和消息队列的键值对</span><br><span class="line"></span><br><span class="line">    # 根据待发送消息的类型做不同处理</span><br><span class="line">    def send_message(self,conversition:str,data:dict):</span><br><span class="line">        # 发送消息给对应的地址</span><br><span class="line">         # 发送消息给对应的地址</span><br><span class="line">        sock=  self.get_client(conversition=conversition)</span><br><span class="line">        if sock is None:</span><br><span class="line">            return False</span><br><span class="line">        msg=json.dumps(data)</span><br><span class="line">        self.msg_queue[sock].put(msg.encode(&quot;utf-8&quot;))</span><br><span class="line">        return True</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    def get_client(self,conversition:str):</span><br><span class="line">        # 遍历所有的连接，获取所有的客户端</span><br><span class="line">        for key, val in self.online_conversition.items():</span><br><span class="line">            if &quot;conversition&quot; in val and val[&#x27;conversition&#x27;] == conversition:</span><br><span class="line">                return key</span><br><span class="line">        return None        </span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>server_thread.py</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line">class ServerThread(QThread):</span><br><span class="line"></span><br><span class="line">    message_signal = pyqtSignal(dict)</span><br><span class="line"></span><br><span class="line">    def __init__(self, sockServer:Server):</span><br><span class="line">        super().__init__()</span><br><span class="line">        self.sockServer = sockServer</span><br><span class="line">         # 定义字典型的signal，用于发送同步用户消息</span><br><span class="line"></span><br><span class="line">   </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    def handle_message(self,data,sock):</span><br><span class="line">        message=json.loads(data)</span><br><span class="line">        </span><br><span class="line">        if &quot;type&quot; in message and message[&#x27;type&#x27;] == &quot;heatbeat&quot;:</span><br><span class="line">                &quot;&quot;&quot;</span><br><span class="line">                监测消息是否是心跳消息，是心跳则更信息信息</span><br><span class="line">                &#123;&quot;conversition&quot;: &quot;测试直播-12313&quot;,type:&quot;heatbeat&quot;&#125;</span><br><span class="line">                &quot;&quot;&quot;</span><br><span class="line">                self.sockServer.online_conversition[sock]=&#123;&quot;last_heatbeat&quot;:time.time(),&quot;conversition&quot;:message[&#x27;conversition&#x27;]&#125;</span><br><span class="line">        elif &quot;type&quot; in message and message[&#x27;type&#x27;] == &quot;message&quot;:</span><br><span class="line">                &quot;&quot;&quot;</span><br><span class="line">                解析数据，并把数据放在一个日志文件里面。</span><br><span class="line">                    &#123;&quot;conversition&quot;: &quot;测试直播-12313&quot;,&quot;from&quot;:&quot;李四&quot;,&quot;content&quot;: &quot;12312312&quot;,time:12332423411,&quot;type&quot;:&quot;message&quot;&#125;</span><br><span class="line">                    &#123;&quot;conversition&quot;: &quot;\u4eac\u4e1c\u5bb6\u7535\u6e05\u6d17\u7279\u60e0\u4e13\u573a-12480794987&quot;, &quot;from&quot;: &quot;\uff20\u996d\u5c0f\u8431\uff08\u4eac\u4e1c\u5bb6\u7535\u6e05\u6d17\uff09&quot;, &quot;content&quot;: &quot;\u6709\u4ec0\u4e48\u95ee\u9898\u53ef\u4ee5\u6253\u5728\u516c\u5c4f\u4e0a\u54e6&quot;, &quot;time&quot;: 1718693761524, &quot;type&quot;: &quot;message&quot;&#125;</span><br><span class="line">                &quot;&quot;&quot;</span><br><span class="line">                self.sockServer.online_conversition[sock]=&#123;&quot;last_heatbeat&quot;:time.time(),&quot;conversition&quot;:message[&#x27;conversition&#x27;]&#125;</span><br><span class="line">                self.message_signal.emit(message) # 重置gui主线程有新的消息</span><br><span class="line"></span><br><span class="line">    # 监听请求</span><br><span class="line">    def listening(self):</span><br><span class="line">        self.sockServer.sock.listen(100)  # 可以挂起的最大连接数</span><br><span class="line">        print(&#x27;Server start at: %s:%s&#x27; % (self.sockServer.host, self.sockServer.port))</span><br><span class="line">        print(&#x27;wait for connection...&#x27;)</span><br><span class="line">        while True:</span><br><span class="line">            readable, writable, exceptional = select.select(self.sockServer.inputs, self.sockServer.outputs, self.sockServer.inputs)</span><br><span class="line">            for r in readable:</span><br><span class="line">                if r is self.sockServer.sock: </span><br><span class="line">                    # 表明有传入请求</span><br><span class="line">                    conn, addr = self.sockServer.sock.accept()</span><br><span class="line">                    print(&#x27;Connected by &#x27;, addr)</span><br><span class="line">                    self.sockServer.add_conn(conn=conn)</span><br><span class="line">                else:</span><br><span class="line">                    # 表示是已有的连接有传入数据</span><br><span class="line">                    body=&#x27;&#x27;</span><br><span class="line">                    try:</span><br><span class="line">                        l= r.recv(4)</span><br><span class="line">                        body_length=struct.unpack(&#x27;i&#x27;,l)[0] # 读取报文的长度</span><br><span class="line">                        body=r.recv(body_length)</span><br><span class="line">                    except:</span><br><span class="line">                        pass</span><br><span class="line">                    if body:</span><br><span class="line">                        # 如果接收到数据</span><br><span class="line">                        self.handle_message(body, r)</span><br><span class="line">                        body = &#x27;&#x27;  # 清空data</span><br><span class="line">                    else:</span><br><span class="line">                        # 连接已断开</span><br><span class="line">                        print(&quot;connection closed from &quot;, r.getpeername())</span><br><span class="line">                        if r in self.sockServer.outputs:</span><br><span class="line">                            # 就不再给它发消息了，移除outputs</span><br><span class="line">                            self.sockServer.outputs.remove(r)</span><br><span class="line">                            self.sockServer.inputs.remove(r)  # 从连接列表中也移去</span><br><span class="line"></span><br><span class="line">                        # 从在线用户中移除</span><br><span class="line">                        try:</span><br><span class="line">                            del  self.sockServer.msg_queue[r]</span><br><span class="line">                            del  self.sockServer.online_conversition[r]  # 删除对应的在线用户信息</span><br><span class="line">                        except:</span><br><span class="line">                            pass</span><br><span class="line">                        r.close()  # 关闭该连接</span><br><span class="line"></span><br><span class="line">            for w in writable:</span><br><span class="line">                if w in self.sockServer.msg_queue.keys() and not self.sockServer.msg_queue[w].empty():</span><br><span class="line">                    data = self.sockServer.msg_queue[w].get(False)</span><br><span class="line">                    w.send(data)    </span><br><span class="line"></span><br><span class="line">    # 覆盖Qthread的run方法，进行接收和发送信息的工作</span><br><span class="line">    def run(self):</span><br><span class="line">       self.listening()</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="新消息过来需要有声音提示"><a href="#新消息过来需要有声音提示" class="headerlink" title="新消息过来需要有声音提示"></a>新消息过来需要有声音提示</h2><pre><code><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">effect = QtMultimedia.QSoundEffect() <span class="comment">#短声音组件，</span></span><br><span class="line">effect.setSource(QUrl.fromLocalFile(f&#123;app_path()&#125;/voice/receive.wav<span class="string">&quot;)) # 声音文件，目前只支持wav格式，mp3有问题</span></span><br><span class="line"><span class="string">effect.setVolume(1) # 设置音量</span></span><br><span class="line"><span class="string">effect.play() # 播放声音</span></span><br><span class="line"><span class="string">    </span></span><br></pre></td></tr></table></figure></code></pre><h2 id="实现微信那样的汽泡"><a href="#实现微信那样的汽泡" class="headerlink" title="实现微信那样的汽泡"></a>实现微信那样的汽泡</h2><h3 id="一种基于小懵白小趣谈的画笔画图实现"><a href="#一种基于小懵白小趣谈的画笔画图实现" class="headerlink" title="一种基于小懵白小趣谈的画笔画图实现"></a>一种基于小懵白小趣谈的画笔画图实现</h3><p>但操作起来太过复杂，而且后面的代码也开始收费了，所以以另外一种方法实现，只是看代码还算有意思，就记录了一下，并不符合需求。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">window_height = <span class="number">10</span></span><br><span class="line">begin_width_spacing = <span class="number">20</span></span><br><span class="line">begin_height_spacing = <span class="number">16</span></span><br><span class="line">icon_width = <span class="number">40</span></span><br><span class="line">icon_height = <span class="number">40</span></span><br><span class="line">text_width_spacing = <span class="number">12</span></span><br><span class="line">text_height_spacing = <span class="number">12</span></span><br><span class="line">triangle_width = <span class="number">6</span></span><br><span class="line">triangle_height = <span class="number">10</span></span><br><span class="line">triangle_height_spacing = <span class="number">10</span></span><br><span class="line">text_min_width = <span class="number">0</span></span><br><span class="line">min_width = <span class="number">0</span></span><br><span class="line">text_max_width = <span class="number">0</span></span><br><span class="line">real_width = <span class="number">0</span></span><br><span class="line">text_height = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MessageItemWidget</span>(<span class="title class_ inherited__">QWidget</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,parent=<span class="literal">None</span>,fromUser=<span class="string">&quot;&quot;</span>,content=<span class="string">&quot;&quot;</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(MessageItemWidget,<span class="variable language_">self</span>).__init__(parent=parent)</span><br><span class="line">        <span class="variable language_">self</span>.content=content</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 重写paintEvent 否则不能使用样式表定义外观</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">paintEvent</span>(<span class="params">self, event</span>):</span><br><span class="line">        <span class="variable language_">self</span>.init_data() <span class="comment"># 获取文本长度、气泡框架问题</span></span><br><span class="line">        <span class="keyword">global</span> text_min_width, min_width, text_max_width, real_width, text_height, window_height</span><br><span class="line">        <span class="comment"># 初始化QPainter对象，一支画笔</span></span><br><span class="line">        painter = QtGui.QPainter(<span class="variable language_">self</span>)</span><br><span class="line">        painter.setRenderHints(QtGui.QPainter.Antialiasing | QtGui.QPainter.SmoothPixmapTransform)</span><br><span class="line">        font = QtGui.QFont()</span><br><span class="line">        font.setFamily(<span class="string">&quot;实体&quot;</span>)</span><br><span class="line">        font.setPointSize(<span class="number">12</span>)</span><br><span class="line">        painter.setFont(font)</span><br><span class="line">   </span><br><span class="line">        <span class="comment"># 画框架</span></span><br><span class="line">        bubbleRect = QRect(begin_width_spacing + icon_width, begin_height_spacing,</span><br><span class="line">                           triangle_width + text_width_spacing + text_max_width + text_width_spacing,</span><br><span class="line">                           text_height_spacing + text_height + text_height_spacing)</span><br><span class="line">        painter.setPen(Qt.NoPen)</span><br><span class="line">        painter.setBrush(QtGui.QBrush(QtGui.QColor(<span class="number">180</span>, <span class="number">180</span>, <span class="number">180</span>)))</span><br><span class="line">        painter.drawRoundedRect(bubbleRect.x() + triangle_width, bubbleRect.y(), bubbleRect.width() - triangle_width,</span><br><span class="line">                                bubbleRect.height(), <span class="number">18</span>, <span class="number">18</span>)</span><br><span class="line">        <span class="comment"># 实现颜色渐变                        </span></span><br><span class="line">        linearGradient = QtGui.QLinearGradient(QPointF(bubbleRect.x() + triangle_width + <span class="number">1</span>, bubbleRect.y() + <span class="number">1</span>),</span><br><span class="line">                                         QPointF(bubbleRect.x() + bubbleRect.width() - <span class="number">1</span>,</span><br><span class="line">                                                 bubbleRect.y() + bubbleRect.height() - <span class="number">1</span>))</span><br><span class="line">        linearGradient.setColorAt(<span class="number">0</span>, QtGui.QColor(<span class="number">151</span>, <span class="number">220</span>, <span class="number">227</span>))</span><br><span class="line">        linearGradient.setColorAt(<span class="number">0.25</span>, QtGui.QColor(<span class="number">151</span>, <span class="number">220</span>, <span class="number">227</span>))</span><br><span class="line">        linearGradient.setColorAt(<span class="number">0.5</span>, QtGui.QColor(<span class="number">151</span>, <span class="number">220</span>, <span class="number">227</span>))</span><br><span class="line">        linearGradient.setColorAt(<span class="number">0.75</span>, QtGui.QColor(<span class="number">151</span>, <span class="number">220</span>, <span class="number">227</span>))</span><br><span class="line">        linearGradient.setColorAt(<span class="number">1</span>, QtGui.QColor(<span class="number">151</span>, <span class="number">220</span>, <span class="number">227</span>))</span><br><span class="line">        painter.setBrush(linearGradient)</span><br><span class="line">        <span class="comment"># 画圆</span></span><br><span class="line">        painter.drawRoundedRect(bubbleRect.x() + triangle_width + <span class="number">1</span>, bubbleRect.y() + <span class="number">1</span>,</span><br><span class="line">                                bubbleRect.width() - triangle_width - <span class="number">2</span>, bubbleRect.height() - <span class="number">2</span>, <span class="number">18</span>, <span class="number">18</span>)</span><br><span class="line">        painter.setPen(QtGui.QPen(QtGui.QColor(<span class="number">244</span>, <span class="number">164</span>, <span class="number">96</span>)))</span><br><span class="line">        painter.drawPolygon(QPointF(bubbleRect.x(), bubbleRect.y() + triangle_height_spacing - <span class="number">4</span>),</span><br><span class="line">                            QPointF(bubbleRect.x() + triangle_width + <span class="number">1</span>, bubbleRect.y() + triangle_height_spacing),</span><br><span class="line">                            QPointF(bubbleRect.x() + <span class="number">6</span> + <span class="number">1</span>, bubbleRect.y() + <span class="number">10</span> + <span class="number">10</span>))</span><br><span class="line"></span><br><span class="line">        painter.setPen(QtGui.QPen(QtGui.QColor(<span class="number">180</span>, <span class="number">180</span>, <span class="number">180</span>)))</span><br><span class="line">        painter.drawLine(QPointF(bubbleRect.x(), bubbleRect.y() + <span class="number">10</span> - <span class="number">4</span>),</span><br><span class="line">                         QPointF(bubbleRect.x() + <span class="number">6</span>, bubbleRect.y() + <span class="number">10</span>))</span><br><span class="line">        painter.drawLine(QPointF(bubbleRect.x(), bubbleRect.y() + <span class="number">10</span> - <span class="number">4</span>),</span><br><span class="line">                         QPointF(bubbleRect.x() + <span class="number">6</span>, bubbleRect.y() + <span class="number">10</span> + <span class="number">10</span>))</span><br><span class="line">        <span class="comment"># 画文字</span></span><br><span class="line">        penText = QtGui.QPen()</span><br><span class="line">        penText.setColor(QtGui.QColor(<span class="number">56</span>, <span class="number">56</span>, <span class="number">56</span>))</span><br><span class="line">        painter.setPen(penText)</span><br><span class="line">        option = QtGui.QTextOption(Qt.AlignmentFlag.AlignLeft | Qt.AlignmentFlag.AlignVCenter)</span><br><span class="line">        option.setWrapMode(QtGui.QTextOption.WrapMode.WrapAtWordBoundaryOrAnywhere)</span><br><span class="line">        painter.drawText(</span><br><span class="line">            QRectF(bubbleRect.x() + triangle_width + text_width_spacing, bubbleRect.y() + text_height_spacing,</span><br><span class="line">                   text_max_width, text_height), <span class="variable language_">self</span>.content, option)          </span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">init_data</span>(<span class="params">self</span>):</span><br><span class="line">        font = QtGui.QFont()</span><br><span class="line">        font.setFamily(<span class="string">&quot;实体&quot;</span>)</span><br><span class="line">        font.setPointSize(<span class="number">12</span>)</span><br><span class="line">        metrics = QtGui.QFontMetrics(font)</span><br><span class="line">        <span class="keyword">global</span> text_min_width, min_width,text_max_width,real_width, text_height, window_height</span><br><span class="line">        <span class="keyword">if</span> metrics.horizontalAdvance(<span class="string">&quot;A&quot;</span>) * <span class="number">2</span> + begin_height_spacing * <span class="number">1.5</span> &gt; text_width_spacing:</span><br><span class="line">            text_min_width = begin_height_spacing * <span class="number">1.5</span> - text_width_spacing</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            text_min_width = <span class="number">0</span></span><br><span class="line">        min_width = begin_width_spacing + icon_width + triangle_width + text_width_spacing + text_width_spacing + icon_width + begin_width_spacing</span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.width()&lt; min_width+text_min_width:</span><br><span class="line">            <span class="variable language_">self</span>.setMinimumWidth(min_width + text_min_width)</span><br><span class="line">        text_max_width = <span class="variable language_">self</span>.width() - min_width</span><br><span class="line">        real_width = metrics.width(<span class="variable language_">self</span>.content)</span><br><span class="line">        <span class="keyword">if</span> real_width &lt; text_max_width:</span><br><span class="line">            text_max_width = real_width</span><br><span class="line">            <span class="keyword">if</span> text_height_spacing+metrics.height()+text_height_spacing&gt;triangle_height_spacing+triangle_height+triangle_height_spacing:</span><br><span class="line">                text_height = metrics.height()</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                text_height = triangle_height_spacing + triangle_height + triangle_height_spacing</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            flag = Qt.TextFlag.TextWordWrap</span><br><span class="line">            textRect = QRect(<span class="number">0</span>, <span class="number">0</span>, text_max_width, <span class="number">0</span>)</span><br><span class="line">                        <span class="comment"># 自动换行</span></span><br><span class="line">            textRect = metrics.boundingRect(textRect, flag, <span class="variable language_">self</span>.content)</span><br><span class="line">            text_height = textRect.height()</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="实现的效果"><a href="#实现的效果" class="headerlink" title="实现的效果"></a>实现的效果</h4><p><img src="/images/pasted-19.png" alt="upload successful"></p><h2 id="消息框输入消息，按Enter键发送消息的功能"><a href="#消息框输入消息，按Enter键发送消息的功能" class="headerlink" title="消息框输入消息，按Enter键发送消息的功能"></a>消息框输入消息，按Enter键发送消息的功能</h2><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a href="https://github.com/pyqt/examples">https://github.com/pyqt/examples</a></p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;需求&quot;&gt;&lt;a href=&quot;#需求&quot; class=&quot;headerlink&quot; title=&quot;需求&quot;&gt;&lt;/a&gt;需求&lt;/h1&gt;&lt;pre&gt;&lt;code&gt;1.快手所有的消息汇集到中控平台。
2.新消息过来需要有声音提示
3.需要实现类似微信那样点击用户名，回复该用户的功能。
4</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>conda命令整理</title>
    <link href="http://yoursite.com/2024/06/27/conda%E5%91%BD%E4%BB%A4%E6%95%B4%E7%90%86/"/>
    <id>http://yoursite.com/2024/06/27/conda%E5%91%BD%E4%BB%A4%E6%95%B4%E7%90%86/</id>
    <published>2024-06-27T08:46:00.000Z</published>
    <updated>2024-07-20T01:21:33.469Z</updated>
    
    <content type="html"><![CDATA[<h3 id="新建新的python环境"><a href="#新建新的python环境" class="headerlink" title="新建新的python环境"></a>新建新的python环境</h3><pre><code>conda create --name yourEnv python=2.7</code></pre><h3 id="若想要在创建环境同时安装python的一些包："><a href="#若想要在创建环境同时安装python的一些包：" class="headerlink" title="若想要在创建环境同时安装python的一些包："></a>若想要在创建环境同时安装python的一些包：</h3><pre><code>conda create -n yourEnv python=3.6 numpy pandas</code></pre><h3 id="若想在别人虚拟环境的基础上创建自己的环境："><a href="#若想在别人虚拟环境的基础上创建自己的环境：" class="headerlink" title="若想在别人虚拟环境的基础上创建自己的环境："></a>若想在别人虚拟环境的基础上创建自己的环境：</h3><pre><code>conda create --name &lt;yourEnv&gt; --clone &lt;baseEnv&gt;</code></pre><h3 id="删除环境"><a href="#删除环境" class="headerlink" title="删除环境"></a>删除环境</h3><pre><code>conda remove -n py36 --all</code></pre><h3 id="激活环境"><a href="#激活环境" class="headerlink" title="激活环境"></a>激活环境</h3><pre><code>conda activate py36</code></pre><h3 id="安装包"><a href="#安装包" class="headerlink" title="安装包"></a>安装包</h3><pre><code>conda install panadas</code></pre><h3 id="搜索包"><a href="#搜索包" class="headerlink" title="搜索包"></a>搜索包</h3><pre><code>conda search panadas</code></pre><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;新建新的python环境&quot;&gt;&lt;a href=&quot;#新建新的python环境&quot; class=&quot;headerlink&quot; title=&quot;新建新的python环境&quot;&gt;&lt;/a&gt;新建新的python环境&lt;/h3&gt;&lt;pre&gt;&lt;code&gt;conda create --name yo</summary>
      
    
    
    
    <category term="python" scheme="http://yoursite.com/categories/python/"/>
    
    
    <category term="python" scheme="http://yoursite.com/tags/python/"/>
    
  </entry>
  
</feed>
